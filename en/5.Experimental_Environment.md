# Experimental Environment

## Common Tools

Since the experimental environments required for different research directions vary greatly, here I only record some common tools and my personal experiences. In addition, I recommend reading or watching ["The Missing Semester of Your CS Education"](https://missing-semester-cn.github.io/).

On laboratory servers, for stability, students are usually granted Docker permissions to run experiments in containers. The recommended tools include:

- MobaXterm: Feature-rich, most common features are free, used for managing and connecting to remote servers, and supports SSH port forwarding.
- VS Code: The one true IDE, open-source, with rich plugins, suitable for remote development and experiments (Note: If you want to use VS Code to SSH directly into a Docker container, it is recommended to add port forwarding parameters when running the container and manually start the SSH service). In addition, students can apply for the GitHub Student Developer Pack to get usage quotas for multiple models in the GitHub Copilot extension.
- conda: For managing Python environments. I personally recommend miniforge. For differences between several tools, see this [article](https://zhuanlan.zhihu.com/p/674145143).

```bash
# List virtual environments
conda env list
# Create a new environment
conda create -n <env_name> python=<version>
# Activate/deactivate environment
conda activate <env_name>
conda deactivate
```

- rsync: File/folder transfer tool with SSH login. The command `python3 -m http.server 12771` can start an HTTP service for file transfer (use wget or browser to download). `nc` can also be used for file transfer, but this is more common in penetration testing scenarios.

```bash
# Upload/download directories/files to/from remote host
rsync -avz /home/user/project/ user@192.168.1.10:/data/project/
rsync -avz user@192.168.1.10:/data/logs/ /home/user/logs/
# Additional common parameters
# Exclude directories or files, supports regex
--exclude '*.log'
# Specify SSH port
-e "ssh -p 2222"
```

- tmux: Terminal management tool, can split the command line interface or run tasks in the background (to prevent experiment interruption due to SSH disconnection)

```bash
# Create a named session
tmux new -s <name>
# List sessions
tmux ls
# Attach to a session
tmux attach -t <name>
# Ctrl+b is the command mode
Ctrl+b %    Split window vertically (left/right)
Ctrl+b "    Split window horizontally (up/down)
Ctrl+b x    Close current pane
Ctrl+b ↑/↓/←/→    Use arrow keys to switch panes
# Enable mouse scrolling in tmux
# Temporarily enable
tmux set -g mouse on
# To enable permanently, add to ~/.tmux.conf:
set -g mouse on
```

- Git acceleration proxy (https://github.akams.cn/): You can paste GitHub links into the website to download directly or copy the accelerated download command. Note that this method may have potential risks since it uses a third-party relay, although it mostly relies on CloudFlare.
- Git code management: Common commands can be generated by large models, but pay special attention to branch management and when to merge into the main branch during collaboration.
- Docker proxy: Involves two aspects, image accelerator and

```bash
# Many domestic cloud providers offer Docker Hub image accelerators. You can get a private mirror source after logging in to Huawei Cloud, Tencent Cloud, or Alibaba Cloud.
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
    "registry-mirrors": [
        "https://docker.m.daocloud.io"
    ]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker

# https://docs.docker.com/config/daemon/systemd/
# Setting environment variable proxies does not allow docker pull to fetch images (the daemon actually pulls the images). For details, refer to the official documentation. On the same LAN, you can use the shared port of clash or v2ray. Here is a summary:
sudo mkdir -p /etc/systemd/system/docker.service.d
sudo tee /etc/systemd/system/docker.service.d/http-proxy.conf <<-'EOF'
[Service]
Environment="HTTP_PROXY=http://proxy.example.com:3128"
Environment="HTTPS_PROXY=http://proxy.example.com:3129"
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
```
- Command line proxy: [proxychains](https://github.com/haad/proxychains), [gg](https://github.com/mzz2017/gg); The difference is that proxychains is configured by protocol and port, while gg supports fetching node lists from common subscription links.
```bash
# Installation commands for proxychains vary by system
# Usually just modify the last line of /etc/proxychains.conf
proxychains curl www.google.com

# gg common commands for installation and writing subscription
gg config -w subscription='https://example.com/path/to/sub'
# Then prepend gg to your command
gg curl www.google.com
```
- [jvms](https://github.com/ystyle/jvms): Java switching tool for Windows platform

Finally, it is important to emphasize the security of experimental machines. At the very least, avoid weak passwords. It is recommended to use key-based login, generate and keep your key pair locally, and upload the public key to the experimental machine. Refer to the following links:

- [Set up SSH key login](https://www.runoob.com/w3cnote/set-ssh-login-key.html)
